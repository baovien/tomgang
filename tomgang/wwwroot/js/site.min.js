function updateIntervals(){setInterval(function(){window.currentGains+=window.incomeValue*.1},100);setInterval(function(){getUnlockedAchis();getEligibleUpgrades()},1e3);setInterval(function(){getHighscoreValues();getPlayerInfo();updateInfoTab()})}function update(){window.isInitialized&&window.update!==undefined?(getEligibleUpgrades(),getUnlockedAchis(),increaseGains(),updateVariables(),updateUpgradesStatus(),updateItemsStatus(),updateGainsCounter(),updateInfoTab(),updateHighscoreTab(),updateAchievementsStatus()):(console.log(window.isInitialized),console.log(window.update))}function getCurrentGains(){window.hub.server.getCurrentGains().done(function(n){window.currentGains=n})}function getEligibleUpgrades(){window.hub.server.checkUpgrades().done(function(n){window.upgrades=n})}function getHighscoreValues(){window.hub.server.getHighscore().done(function(n){window.highscore=n})}function getUnlockedAchis(){window.hub.server.checkAchis().done(function(n){window.achis=n})}function increaseGains(){window.hub.server.increaseGains()}function getPlayerInfo(){window.hub.server.getUserInfo().done(function(n){window.currentGains=n.currentGains;window.incomeValue=n.incomeValue;window.clickValue=n.clickValue;window.totalGains=n.totalGains;window.timesClicked=n.timesClicked;window.timeJoined=n.timeJoined})}function updateInfoTab(){$("#gpsec").text(window.incomevalue);$("#gplift").text(window.clickValue);$("#totgains").text(Math.floor(window.totalGains));$("#timesClicked").text(window.timesClicked);$("#joindate").text(window.timeJoined)}function updateHighscoreTab(){var n=0,t=$("#hstable tbody tr").length;window.highscore.forEach(function(i){$("#addr"+n).html("<td class='pos'>"+(n+1)+"<\/td><td class='name'>"+i.item1+" <\/td><td class='score'>"+Math.floor(i.item2)+"<\/td>");t<window.highscore.length&&$("#hstable").append('<tr id="addr'+(n+1)+'"><\/tr>');$("#hstable tbody > tr").sort(function(n,t){return+$("td.score",t).text()>+$("td.score",n).text()}).appendTo("tbody").find("td:first").text(function(n){return++n});n++},this)}function liftClickPost(){$("#benkmann").click(function(){window.hub.server.liftClick();getCurrentGains();$("#gainNumber").text(Math.floor(window.currentGains));$("#timesClicked").text(window.timesClicked+1)})}function updateGainsCounter(){$("#gainNumber").text(Math.floor(window.currentGains))}function updateUpgradesStatus(){window.upgrades!==undefined&&window.upgrades.forEach(function(n){window.currentGains<=n.item2?($('[id="'+n.item1+'"]').addClass("upgradeGreyed"),$('[id="'+n.item1+'"]').css({"background-color":""})):($('[id="'+n.item1+'"]').removeClass("upgradeGreyed"),$('[id="'+n.item1+'"]').css({"background-color":"green"}));$('[id="'+n.item1+'"]').show()})}function upgradeBtnsPost(){$(".upgradeImg").each(function(){$(this).on("click",function(){updateVariables();var n=window.currentGains;n>=this.dataset.cost&&(window.hub.server.upgradeClick($(this).attr("id")),$(this).remove(),$(".popover").remove(),$("#gainNumber").text(Math.floor(n-this.dataset.cost)),updateUpgradesStatus())})})}function updateItemsStatus(){$(".itemImg").each(function(){window.currentGains<this.dataset.cost?($(this).addClass("upgradeGreyed"),$(this).css({"background-color":""})):($(this).removeClass("upgradeGreyed"),$(this).css({"background-color":"green"}));$(this).show()})}function updateItemsCost(){$(".itemImg").each(function(){var n=this;window.hub.server.getSingleItemAmount($(n).attr("id")).done(function(t){n.dataset.cost=n.dataset.startingprice*Math.exp(.14*t);$(n).attr("data-original-title",n.dataset.name+" - Price: "+Math.round(n.dataset.cost)+" - Owned: "+t)})})}function itemBtnsPost(){$(".itemImg").each(function(){$(this).on("click",function(){var n=this;console.log(this);window.hub.server.itemClick($(this).attr("id")).done(function(t){if(t){getCurrentGains();var i=window.currentGains;$("#gainNumber").text(Math.floor(i-n.dataset.cost));window.hub.server.getSingleItemAmount($(n).attr("id")).done(function(t){n.dataset.cost=n.dataset.startingprice*Math.exp(.14*t);$(n).attr("data-original-title",n.dataset.name+" - Price: "+Math.round(n.dataset.cost)+" - Owned: "+t);$(n).popover("hide")})}})})})}function updateAchievementsStatus(){var n,t,i;if(window.achis!==undefined)for(n=0;n<window.achis.length;n++)t=document.getElementById(window.achis[n]),window.achis[n]!==$(t).attr("id")?console.log(window.achis[n]):(i=$(t).attr("data-imgPath"),console.log(i),$(t).attr("src",i))}function signalr(){window.hub=$.connection.broadcaster;$.connection.broadcaster.client.addChatMessage=addPost;$.connection.hub.logging=!0;$.connection.hub.start().done(function(n){console.log("Connected!");console.log("SignalR object: ",n);window.hub.server.getUserInfo().done(function(n){window.currentGains=n.currentGains;window.incomevalue=n.incomeValue;window.clickValue=n.clickValue;window.totalGains=n.totalGains;window.timesClicked=n.timesClicked;window.timeJoined=n.timeJoined;window.isInitialized=!0;updateGainsCounter();updateItemsCost();updateItemsStatus();updateInfoTab();liftClickPost();upgradeBtnsPost();itemBtnsPost()});window.hub.server.checkUpgrades().done(function(n){window.upgrades=n;updateUpgradesStatus()});window.hub.server.checkAchis().done(function(n){window.achis=n});window.hub.server.getHighscore().done(function(n){window.highscore=n;updateHighscoreTab()});window.hub.server.subscribe("MainChatroom")}).fail(function(n){console.log("Failed to start connection! Error: ",n)});$("#textInput").keypress(function(n){n.keyCode==13&&$("#publishPostButton").click()});$("#publishPostButton").click(function(){if($("#textInput").val()!==""){var n={content:$("#textInput").val()};$.ajax({headers:{"Content-Type":"application/json"},type:"POST",url:"/chatroom/",data:JSON.stringify(n),dataType:"json"}).fail(function(n){console.log(n)});$("#textInput").val("")}})}function addPostsList(n){$.each(n,function(t){var r=n[t],i=n;addPost(i)})}function addPost(n){console.log("New post from server: ",n);$("#postsList").append("<li>("+n.timestamp.substring(11,16)+") "+n.author+": "+n.content+"<\/li>");var t=$("#postsList").get(0);t.scrollTop=t.scrollHeight}function getPostList(){$.ajax({url:"/chatroom/",method:"GET",dataType:"JSON",success:addPostsList})}$(document).ready(function(){console.log("wtf");$(".itemImg, .upgradeImg, .achiImg").popover();$(".btn-pref .btn").click(function(){$(".btn-pref .btn").removeClass("btn-primary").addClass("btn-default");$(this).removeClass("btn-default").addClass("btn-primary")});$("#login-form-link").click(function(n){$("#login-form").delay(100).fadeIn(100);$("#register-form").fadeOut(100);$("#register-form-link").removeClass("active");$(this).addClass("active");n.preventDefault()});$("#register-form-link").click(function(n){$("#register-form").delay(100).fadeIn(100);$("#login-form").fadeOut(100);$("#login-form-link").removeClass("active");$(this).addClass("active");n.preventDefault()});$("#login-dp").click(function(n){n.stopPropagation()});$("#letsgoleft").click(function(){$("#testlols").load("Manage/ChangePassword",$("#testlols").serialize());$("#goback").show()});$("#goback").click(function(){$("#testlols").load("Manage/Index",$("#testlols").serialize());$("#goback").hide()})});